<html lang="en">
    <head>
        <title>my_conf</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="../static/style.css">
    </head>
    <body bgcolor="#e6ffee">
        <div class="one">
            <div class="two">
                <h1>Side Bar</h1>
                <ul>
                    <li><a href="{{url_for('index')}}">Index</a></li>
                    <li><a href="{{url_for('your_account')}}">Your account</a></li>
                    <li><a href="{{url_for('my_reservations')}}">My reservations</a></li>
                    <li><a href="{{url_for('my_conferences')}}">My conferences</a></li>
                    <li><a href="{{url_for('all_conferences')}}">All conferences</a></li>
                    <li><a href="{{url_for('create_conference')}}">Create new conference</a></li>
                    <li><a href="{{url_for('my_applications')}}">My applications</a></li>
                    {% if admin_bool %}
                    <li><a href="{{url_for('user_management')}}">User management</a></li>
                    {% endif %}
                    <li><a href="{{url_for('logout')}}">Log out</a></li>
                </ul> 
            </div>
            <div class="content" align="center">
                <div class="topbar">
                    <h2>{{ conf['nazov'] }}</h2>
                    <h3>{{session['login']}}</h3> 
            </div>
            <div>
                <h2>{{ conf['zaner'] }}</h2>
                <h2>{{ conf['obsah'] }}</h2>
                <h2>From: {{ conf['od_datum'] }}</h2>
                <h2>To: {{ conf['do_datum'] }}</h2>
                <h2>Organisator: {{ conf['login'] }}</h2>
                <h2>Capacity: {{ conf['aktualna_zaplnenost'] }} / {{ conf['celkova_kapacita'] }}</h2>
                <h2>Price: {{ conf['cena'] }}</h2>
            </div><br>
            <label>Presentations:</label><br>
            {% for room in conf['miestnosti'] %}
            <label>{{ room }}</label>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Date & Time:</th>
                        <th>Speaker:</th>
                        <th>Presentation:</th>
                    </tr>
                </thead>
                <tbody>
                    {% for lec in lecs %}
                    {% if lec['m.nazov'] == room %}
                    <tr>
                        <td>{{ lec['cas'] }}</td>
                        <td>{{ lec['login'] }}</td>
                        <td>{{ lec['nazov'] }}</td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table><br>
            {% endfor %}
            <label for="applications">Applications:</label>
            <div class="msg">{{ msg }}</div>
            <table name="applications" id="applications" class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>ID:</th>
                        <th>Name:</th>
                        <th>Presention:</th>
                        <th>About:</th>
                        <th>Room:</th>
                        <th>Date & Time:</th>
                        <th>Decision:</th>
                    </tr>
                </thead>
                <tbody>
                    {% for application in applications%}
                    <form action="{{ url_for('my_conf', conf_id=conf['id_kon']) }}" method="post" autocomplete="off">
                        <tr>
                            <td name="id_pred">{{ application['id_pred'] }}</td>
                            <input type="hidden" name="id_pred" id="id_pred" value="{{ application['id_pred'] }}" />
                            <td>{{ application['login'] }}</td>
                            <td>{{ application['nazov'] }}</td>
                            <td>{{ application['obsah'] }}</td>
                            <td>
                                <select name="rooms" id="rooms" required>
                                    {% for room in conf['miestnosti'] %}    
                                        <option value = {{ room }}>{{ room }}</option>
                                    {% endfor %}
                                </select>
                            </td>
                            <td>
                                <input type="datetime-local" name="datetime" placeholder="Date" class="textbox" id="datetime" min="datetime-local" value="datetime-local" step="3600" required>
                            </td>
                            <td>
                                <input type="submit" name="submit" id="submit" value="Accept">
                            </td>
                            <td>
                                <input type="submit" name="submit" value="Decline" formnovalidate>
                            </td>
                        </tr>
                    </form>
                    {% endfor %}
                </tbody>
                </table><br>
            {% if conf['aktualna_zaplnenost'] < conf['celkova_kapacita'] %}
                <label for="incoming_reservations">Incoming reservations:</label>
                <table name="incoming_reservations" id="incoming_reservations" class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>ID:</th>
                            <th>Name & Surname:</th>
                            <th>Number of tickets:</th>
                        </tr>
                    </thead>    
                    <tbody>
                        {% for reservation in incoming_reservations %}    
                        <form action="{{ url_for('my_conf', conf_id=conf['id_kon']) }}" method="post">
                            <tr>
                                <td name="id_rez">{{ reservation['id_rez'] }}</td>
                                <input type="hidden" name="id_rez" id="id_rez" value="{{ reservation['id_rez'] }}"/>
                                <td >{{ reservation['meno'] }} {{ reservation['priezvisko'] }}</td>
                                <td>{{ reservation['pocet_listkov'] }}</td>
                                <td>
                                    <input type="submit" name="reservation_submit" id="reservation_submit" value="Confirm">
                                </td>
                                <td>
                                    <input type="submit" name="reservation_submit" id="reservation_submit" value="Decline">
                                </td>
                            </tr>
                        </form>
                        {% endfor %}
                    </tbody>
                </table><br>
            {% endif %}
        </div>
    </body>
</html>